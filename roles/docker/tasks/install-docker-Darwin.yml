# SPDX-License-Identifier: MIT-0
---
# macOS - Docker Desktop installation via Homebrew

- name: Check if Docker Desktop is already installed
  ansible.builtin.stat:
    path: "{{ docker_app_path }}"
  register: docker_desktop_installed
  changed_when: false

- name: Install Docker Desktop via Homebrew
  community.general.homebrew_cask:
    name: "{{ docker_desktop_cask }}"
    state: present
  when: not docker_desktop_installed.stat.exists

- name: Verify Docker Desktop installation
  ansible.builtin.stat:
    path: "{{ docker_app_path }}"
  register: docker_verify
  failed_when: not docker_verify.stat.exists
  changed_when: false
